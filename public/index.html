
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>Brady Love</title>
    <meta name="author" content="Brady Love">

    
    <meta name="description" content="Rounded Corners With Ruby Motion Another trick I learned with Objective-C/Ruby Motion is giving a view is rounded corners. When I first set out to &hellip;">
    
    <meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1">

    <link href="/atom.xml" rel="alternate" title="Brady Love" type="application/atom+xml">
    <link rel="canonical" href="">
    <link href="/favicon.png" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]><script src="/javascripts/html5.js"></script><![endif]-->
    <script src="/javascripts/jquery.min.js"></script>
    
    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-23704883-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<header class="inner"><h1 class="left"><a href="/">Brady Love</a></h1>
<nav class="menu left"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<div class="right">
	<form class="search right" action="http://google.com/search" method="get">
		<input class="left" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:bradylove.com">
	</form>
	<div class="social right">
		
		
		<a class="google" href="https://plus.google.com/103044975863330542854" title="Google+">Google+</a>
		
		
		<a class="twitter" href="http://twitter.com/bradyl0ve" title="Twitter">Twitter</a>
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</div>
</header>
	
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/bradyl0ve">bradyl0ve</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('bradyl0ve', 4, false);
	})(jQuery);
</script>

	<div id="content" class="inner">


    <article class="post">
    <h1 class="title"><a href="/blog/2012/06/04/rounded-corners-with-ruby-motion/">Rounded Corners With Ruby Motion</a></h1>
    <div class="entry">
        <p>Another trick I learned with Objective-C/Ruby Motion is giving a view is rounded corners. When I first set out to learn how to do rounded corners with Ruby Motion, I quickly found a one liner calling layer.cornerRadius= on a view, which I thought was awesome! I remember thinking to myself &#8220;that was too easy but awesome!&#8221;. I soon found out I was right, it was too easy. So I set out again to find a better solution and found a similar question on stack overflow for someone trying to accomplish the same thing with Objective-C. I find myself using this alot now so I thought I would share it and hope it helps someone else as well. Before I get started with the details. I have already created a project with &#8220;motion create AppName&#8221;, created a window and initilized the RootViewController in my app_delegate.rb.
And here is the starting code for the RootViewController which just has a single UIView, 200x200 in size, centered and colored green.</p>

<figure class='code'><figcaption><span>root_view_controller.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">RootViewController</span> <span class="o">&lt;</span> <span class="no">UIViewController</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">viewDidLoad</span>
</span><span class='line'>    <span class="n">view</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">lightGrayColor</span>
</span><span class='line'>
</span><span class='line'>    <span class="vi">@rounded_rect</span> <span class="o">=</span> <span class="no">UIView</span><span class="o">.</span><span class="n">alloc</span><span class="o">.</span><span class="n">initWithFrame</span><span class="p">(</span><span class="o">[[</span><span class="n">view</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">view</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">100</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="o">]]</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">greenColor</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="n">view</span><span class="o">.</span><span class="n">addSubview</span> <span class="vi">@rounded_rect</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>So you should have something that looks like this.</p>

<p><img src="http://content.screencast.com/users/BLove/folders/Jing/media/955d5e1d-e52a-420d-9a2e-9ac3a8afd81a/00000005.png" alt="" /></p>

<h2>The Easy Way</h2>

<p>Okay so real quick I thought I would show you the easy way and show you the problem I found with it. To quickly achieve this we just need to set the cornerRadius on the UIView&#8217;s layer. So after setting the backgroundColor for @rounded_rect I am going to add this line.</p>

<figure class='code'><figcaption><span>root_view_controller.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">layer</span><span class="o">.</span><span class="n">cornerRadius</span> <span class="o">=</span> <span class="mi">30</span><span class="o">.</span><span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>Awesome! We now have some rounded corners!</p>

<p><img src="http://content.screencast.com/users/BLove/folders/Jing/media/f33fc52a-9c7d-42dd-8f3a-f1df10f283b4/00000006.png" alt="" /></p>

<h2>The Problem</h2>

<p>Okay so this works out great for us if we need to quickly add rounded corners to a view. But the problem comes when we add subviews that are going to be in the area of those rounded corners. To show you this I am going to add another UIView as a subview to our @rounded_rect view. We will call this @non_rounded_subview, I am going to make this subview the same size as its parent and color it red by adding the following.</p>

<figure class='code'><figcaption><span>root_view_controller.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vi">@non_rounded_subview</span> <span class="o">=</span> <span class="no">UIView</span><span class="o">.</span><span class="n">alloc</span><span class="o">.</span><span class="n">initWithFrame</span><span class="p">(</span><span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>
</span><span class='line'><span class="vi">@non_rounded_subview</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">redColor</span>
</span><span class='line'>
</span><span class='line'><span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">addSubview</span> <span class="vi">@non_rounded_subview</span>
</span></code></pre></td></tr></table></div></figure>


<p>OH NOES! Where did our rounded corners go?</p>

<p><img src="http://content.screencast.com/users/BLove/folders/Jing/media/c74b0c0f-b854-4195-a660-f7919c577bf3/00000007.png" alt="" /></p>

<p>Our rounded corners are still there, however the parent views rounded corners do not clip the child view. To show this better I will set the backgroundColor of @non_rounded_subview to have a slight transparent to better show this.</p>

<figure class='code'><figcaption><span>root_view_controller.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vi">@non_rounded_subview</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">colorWithRed</span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">green</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">blue</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">5</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://content.screencast.com/users/BLove/folders/Jing/media/1e3ffeab-3e07-42aa-81c1-0670b3bb88f5/00000008.png" alt="" /></p>

<h2>The Solution</h2>

<p>So the easy way works great if you just need some simple rounded corners and arent going to be placing anything over them. However in my case I needed the rounded corners of the parent view to clip the child view. The solution I came up with ended up being even greater then I expected, not only cliping child views but giving me alot more control over the corners. To accomplish this I used UIBezierPath and CAShapeLayer to create a layer mask and then applied the layer mask to the parent view (@rounded_rect). To do this I removed the following line</p>

<figure class='code'><figcaption><span>root_view_controller.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">layer</span><span class="o">.</span><span class="n">cornerRadius</span> <span class="o">=</span> <span class="mi">30</span><span class="o">.</span><span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>and replaced it with this</p>

<figure class='code'><figcaption><span>root_view_controller.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">mask_path</span> <span class="o">=</span> <span class="no">UIBezierPath</span><span class="o">.</span><span class="n">bezierPathWithRoundedRect</span><span class="p">(</span><span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">bounds</span><span class="p">,</span>
</span><span class='line'>                                                   <span class="n">byRoundingCorners</span><span class="p">:</span> <span class="no">UIRectCornerAllCorners</span><span class="p">,</span>
</span><span class='line'>                                                   <span class="n">cornerRadii</span><span class="p">:</span>       <span class="no">CGSizeMake</span><span class="p">(</span><span class="mi">30</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="o">.</span><span class="mi">0</span><span class="p">))</span>
</span><span class='line'><span class="n">mask_layer</span> <span class="o">=</span> <span class="no">CAShapeLayer</span><span class="o">.</span><span class="n">layer</span>
</span><span class='line'><span class="n">mask_layer</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">bounds</span>
</span><span class='line'><span class="n">mask_layer</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">mask_path</span><span class="o">.</span><span class="n">CGPath</span>
</span><span class='line'><span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">layer</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="n">mask_layer</span>
</span></code></pre></td></tr></table></div></figure>


<p>And our rounded corners are back and better than ever!!!</p>

<p><img src="http://content.screencast.com/users/BLove/folders/Jing/media/87b459f3-3893-4d5f-89f0-95484f871fe3/00000009.png" alt="" /></p>

<p>The cornerRadii for the UIBezierPath is where we set how much extreme we want our corners rounded. The first value of the CGSizeMake is a float for the width of your corner radius, the other being a float for the height of your corner radius. So you can change those values to something like</p>

<figure class='code'><figcaption><span>root_view_controller</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">cornerRadii</span><span class="p">:</span>       <span class="no">CGSizeMake</span><span class="p">(</span><span class="mi">40</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">150</span><span class="o">.</span><span class="mi">0</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>And you will end up with something a little different.</p>

<p><img src="http://content.screencast.com/users/BLove/folders/Jing/media/8a5a9051-4ff0-431f-8036-726f440d4d4c/00000010.png" alt="" /></p>

<p>You also have more control in which corners actually get the rounding by editing the &#8220;byRoundingCorners&#8221; value. I currently have that set to UIRectCornerAllCorners. Which we can set to UIRectCornerAllCorners, UIRectCornerTopLeft, UIRectCornerTopRight, UIRectCornerBottomLeft, UIRectCornerBottomRight or any combonation of these seperated by a pipe ( | ). For example to round only the top left and bottom right corners I would change the following.</p>

<figure class='code'><figcaption><span>root_view_controlelr.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">byRoundingCorners</span><span class="p">:</span> <span class="no">UIRectCornerAllCorners</span><span class="p">,</span>
</span></code></pre></td></tr></table></div></figure>


<p>to</p>

<figure class='code'><figcaption><span>root_view_controlelr.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">byRoundingCorners</span><span class="p">:</span> <span class="no">UIRectCornerTopLeft</span> <span class="o">|</span> <span class="no">UIRectCornerBottomRight</span><span class="p">,</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ending up with,</p>

<p><img src="http://content.screencast.com/users/BLove/folders/Jing/media/207d53ff-8e1e-4dd1-afa8-6979ed78f54d/00000011.png" alt="" /></p>

<p>Well thats about it, in the end my code ended up looking like this incase you missed something. Or you can check it out on my Github at <a href="https://github.com/bradylove/RoundedCorners-RubyMotion">https://github.com/bradylove/RoundedCorners-RubyMotion</a></p>

<figure class='code'><figcaption><span>root_view_controller.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">RootViewController</span> <span class="o">&lt;</span> <span class="no">UIViewController</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">viewDidLoad</span>
</span><span class='line'>    <span class="n">view</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">lightGrayColor</span>
</span><span class='line'>
</span><span class='line'>    <span class="vi">@rounded_rect</span> <span class="o">=</span> <span class="no">UIView</span><span class="o">.</span><span class="n">alloc</span><span class="o">.</span><span class="n">initWithFrame</span><span class="p">(</span>
</span><span class='line'>      <span class="o">[[</span><span class="n">view</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">view</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">100</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="o">]]</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">greenColor</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">mask_path</span> <span class="o">=</span> <span class="no">UIBezierPath</span><span class="o">.</span><span class="n">bezierPathWithRoundedRect</span><span class="p">(</span><span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">bounds</span><span class="p">,</span>
</span><span class='line'>                                                       <span class="n">byRoundingCorners</span><span class="p">:</span> <span class="no">UIRectCornerTopLeft</span> <span class="o">|</span> <span class="no">UIRectCornerBottomRight</span><span class="p">,</span>
</span><span class='line'>                                                       <span class="n">cornerRadii</span><span class="p">:</span>       <span class="no">CGSizeMake</span><span class="p">(</span><span class="mi">40</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="o">.</span><span class="mi">0</span><span class="p">))</span>
</span><span class='line'>    <span class="n">mask_layer</span> <span class="o">=</span> <span class="no">CAShapeLayer</span><span class="o">.</span><span class="n">layer</span>
</span><span class='line'>    <span class="n">mask_layer</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">bounds</span>
</span><span class='line'>    <span class="n">mask_layer</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">mask_path</span><span class="o">.</span><span class="n">CGPath</span>
</span><span class='line'>    <span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">layer</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="n">mask_layer</span>
</span><span class='line'>
</span><span class='line'>    <span class="vi">@non_rounded_subview</span> <span class="o">=</span> <span class="no">UIView</span><span class="o">.</span><span class="n">alloc</span><span class="o">.</span><span class="n">initWithFrame</span><span class="p">(</span><span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@non_rounded_subview</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">colorWithRed</span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">green</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">blue</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="vi">@rounded_rect</span><span class="o">.</span><span class="n">addSubview</span> <span class="vi">@non_rounded_subview</span>
</span><span class='line'>    <span class="n">view</span><span class="o">.</span><span class="n">addSubview</span> <span class="vi">@rounded_rect</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Hope you enjoyed. I have not done a whole lot of documentation or blogging but it is something I want to get better at and do more of so any input is more than welcome. Also if anyone has a good suggestion for a screenshot app that does uploads that would be helpful too. Thank you.</p>

        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2012-06-04T20:08:00-07:00" pubdate data-updated="true">Jun 4<span>th</span>, 2012</time></div>
        <div class="tags">

<div class="cat">
  
    <a class='category' href='/blog/categories/ruby/'>Ruby</a>, <a class='category' href='/blog/categories/ruby-motion/'>Ruby Motion</a>, <a class='category' href='/blog/categories/ios/'>iOS</a>
  
</div>

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/blog/2012/05/27/create-gradients-with-ease-in-ruby-motion/">Create Gradients With Ease in Ruby Motion</a></h1>
    <div class="entry">
        <p>Lately I have been messing around with Ruby Motion and have been learning alot about the way things are done in iOS. Along the way there have been many things I wanted to do but had no clue how (Having very little expirience with Objective-C). One of the things I wanted to figure out how to do was to create gradients programatically so I would not have to images. After about 3 hours of trying to figure it out and failing miserably I gave up and used images anyway. But the next day it suddenly hit me and I was able to figure it out and it was alot easier then what I was trying to do the night before. So I figured someone else might find this useful.</p>

<p>In the first part of this example I am going to show you how add a gradient background on a UIView. So first thing we need to do is create our Ruby Motion project and setup our view controller.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>motion create GradientExample
</span><span class='line'>cd GradientExample</span></code></pre></td></tr></table></div></figure>


<p>Then open up the Rakefile created by the generator and add the QuartzCore framework.</p>

<figure class='code'><figcaption><span>Rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="vg">$:</span><span class="o">.</span><span class="n">unshift</span><span class="p">(</span><span class="s2">&quot;/Library/RubyMotion/lib&quot;</span><span class="p">)</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;motion/project&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="no">Motion</span><span class="o">::</span><span class="no">Project</span><span class="o">::</span><span class="no">App</span><span class="o">.</span><span class="n">setup</span> <span class="k">do</span> <span class="o">|</span><span class="n">app</span><span class="o">|</span>
</span><span class='line'>  <span class="c1"># Use `rake config&#39; to see complete project settings.</span>
</span><span class='line'>  <span class="n">app</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;EasyGradients&#39;</span>
</span><span class='line'>  <span class="n">app</span><span class="o">.</span><span class="n">frameworks</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;QuartzCore&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next we will create our UIWindow and add a view controller to it. So open up your app_delegate.rb and make it look like this.</p>

<figure class='code'><figcaption><span>app/app_delegate.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">AppDelegate</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">application</span><span class="p">(</span><span class="n">application</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span><span class="ss">:launchOptions</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@window</span> <span class="o">=</span> <span class="no">UIWindow</span><span class="o">.</span><span class="n">alloc</span><span class="o">.</span><span class="n">initWithFrame</span><span class="p">(</span><span class="no">UIScreen</span><span class="o">.</span><span class="n">mainScreen</span><span class="o">.</span><span class="n">bounds</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@window</span><span class="o">.</span><span class="n">rootViewController</span> <span class="o">=</span> <span class="no">GradientViewController</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'>    <span class="vi">@window</span><span class="o">.</span><span class="n">rootViewController</span><span class="o">.</span><span class="n">wantsFullScreenLayout</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class='line'>    <span class="vi">@window</span><span class="o">.</span><span class="n">makeKeyAndVisible</span>
</span><span class='line'>
</span><span class='line'>    <span class="kp">true</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then create the file for our GradientViewController.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>touch app/gradient_view_controller.rb
</span></code></pre></td></tr></table></div></figure>


<p>Open up the gradient_view_controller.rb. This is were we are going to work our gradient magic.</p>

<figure class='code'><figcaption><span>app/gradient_view_controller.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">GradientViewController</span> <span class="o">&lt;</span> <span class="no">UIViewController</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">viewDidLoad</span>
</span><span class='line'>    <span class="n">gradient</span> <span class="o">=</span> <span class="no">CAGradientLayer</span><span class="o">.</span><span class="n">layer</span>
</span><span class='line'>    <span class="n">gradient</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">bounds</span>
</span><span class='line'>    <span class="n">gradient</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="o">[</span><span class="no">UIColor</span><span class="o">.</span><span class="n">blackColor</span><span class="o">.</span><span class="n">CGColor</span><span class="p">,</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">whiteColor</span><span class="o">.</span><span class="n">CGColor</span><span class="o">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">view</span><span class="o">.</span><span class="n">layer</span><span class="o">.</span><span class="n">addSublayer</span><span class="p">(</span><span class="n">gradient</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then back in your console you can go ahead and run the <code>rake</code> command to launch the app in the iOS Simulator and should have something like this.</p>

<p><img src="https://img.skitch.com/20120527-gk3926patwmn7b9q42ebjs7ts8.jpg" alt="" /></p>

<p>You may notice that gradient.colors just accepts an array so we can easily add more colors to the array.</p>

<figure class='code'><figcaption><span>app/gradient_view_controller.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gradient</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="o">[</span><span class="no">UIColor</span><span class="o">.</span><span class="n">blackColor</span><span class="o">.</span><span class="n">CGColor</span><span class="p">,</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">redColor</span><span class="o">.</span><span class="n">CGColor</span><span class="p">,</span>
</span><span class='line'>                   <span class="no">UIColor</span><span class="o">.</span><span class="n">whiteColor</span><span class="o">.</span><span class="n">CGColor</span><span class="p">,</span> <span class="no">UIColor</span><span class="o">.</span><span class="n">blueColor</span><span class="o">.</span><span class="n">CGColor</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>And you will end up with this</p>

<p><img src="https://img.skitch.com/20120527-dwuxbbhnyrewgne2m7wpk7sdmq.jpg" alt="" /></p>

<p>For more control over the locations of the gradients you can add an array to gradient locations with a Float making their location. 0 being top 1 being bottom.</p>

<figure class='code'><figcaption><span>app/gradient_view_controller.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gradient</span><span class="o">.</span><span class="n">locations</span> <span class="o">=</span> <span class="o">[</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="o">.</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="o">.</span><span class="mi">9</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Which will end up someting like this</p>

<p><img src="https://img.skitch.com/20120527-p3si97dy86x9bskaxsad8eea8s.jpg" alt="" /></p>

<p>Well thats about it, you can easily use these gradients for backgrounds for almost all UI objects. Hope this helps someone that is as lost as me. There are some more iOS/Ruby Motion tricks I have been learning so check back soon on write ups for them.</p>

        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2012-05-27T13:01:00-07:00" pubdate data-updated="true">May 27<span>th</span>, 2012</time></div>
        <div class="tags">

<div class="cat">
  
    <a class='category' href='/blog/categories/ruby/'>Ruby</a>, <a class='category' href='/blog/categories/ruby-motion/'>Ruby Motion</a>, <a class='category' href='/blog/categories/ios/'>iOS</a>
  
</div>

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/blog/2012/03/04/refining-my-vim-better-rakefile/">Refining My Vim: Better Rakefile</a></h1>
    <div class="entry">
        <p>So tonight I am taking a closer look at my <a href="https://github.com/vim-files">Vim config</a> to see what I can change to help make my vim experience better. A few months ago I got away from using pre-configured setups of Vim (such as <a href="https://github.com/carlhuda/janus">janus</a>) and setup my own Vim config from scratch. I figured this would make a good blog series focusing on one thing at a time, so here we go.</p>

<h2>Better Rakefile</h2>

<p>One of the things I did when creating my own Vim configuration was created a Rakefile in my ~/.vim directory that makes my setup more mobile. My current rakefile basically has a list of plugins that I want installed, then checks if a folder already exists with a name matching the plugins name, if it doesn&#8217;t then it will download the plugin via git. There is some functionality missing from this that I would like to have, and there is some repetition that bothers me. Before we begin, here is what my current rakefile looks like.</p>

<figure class='code'><figcaption><span>rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">task</span> <span class="ss">:default</span> <span class="k">do</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/scrooloose/nerdtree.git&quot;</span><span class="p">,</span> <span class="s2">&quot;NERDTree&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/vim-scripts/The-NERD-Commenter.git&quot;</span><span class="p">,</span> <span class="s2">&quot;NERD-Commenter&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/vim-scripts/L9.git&quot;</span><span class="p">,</span> <span class="s2">&quot;L9&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/wincent/Command-T.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Command-T&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/mileszs/ack.vim.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Ack&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/tpope/vim-rails.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Rails&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/vim-ruby/vim-ruby.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Ruby&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/mattn/gist-vim.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Gist&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/davidoc/taskpaper.vim.git&quot;</span><span class="p">,</span> <span class="s2">&quot;TaskPaper&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/vim-scripts/vimwiki.git&quot;</span><span class="p">,</span> <span class="s2">&quot;VimWiki&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/tpope/vim-endwise.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Endwise&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/ervandew/supertab&quot;</span><span class="p">,</span> <span class="s2">&quot;SuperTab&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/lucapette/vim-ruby-doc.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Ruby-Doc&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/rbgrouleff/bclose.vim.git&quot;</span><span class="p">,</span> <span class="s2">&quot;BClose&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/bartekd/better-snipmate-snippets.git&quot;</span><span class="p">,</span> <span class="s2">&quot;betterSnipMate&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/tpope/vim-surround&quot;</span><span class="p">,</span> <span class="s2">&quot;surround&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Syntax Files</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/tpope/vim-markdown.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Markdown&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/leshill/vim-json.git&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/tpope/vim-haml.git&quot;</span><span class="p">,</span> <span class="s2">&quot;HAML&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/kchmck/vim-coffee-script.git&quot;</span><span class="p">,</span> <span class="s2">&quot;CoffeeScript&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/pangloss/vim-javascript.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Javascript&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/vim-scripts/eruby.vim.git&quot;</span><span class="p">,</span> <span class="s2">&quot;eruby&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/groenewege/vim-less.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Less&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Colors</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/altercation/vim-colors-solarized.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Color-Solarized&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/squil/vim_colors.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Squil-Colors&quot;</span>
</span><span class='line'>  <span class="nb">clone</span> <span class="s2">&quot;https://github.com/tomasr/molokai.git&quot;</span><span class="p">,</span> <span class="s2">&quot;Molokai&quot;</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">clone</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">name</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="s2">&quot;bundle/</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;[Exists] </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;[Installing] </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="nb">system</span><span class="p">(</span><span class="s2">&quot;git clone </span><span class="si">#{</span><span class="n">url</span><span class="si">}</span><span class="s2"> bundle/</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;[Installed] </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Lets identify the problems I have with this.</h3>

<ul>
<li>&#8220;clone&#8221; is getting called over and over, wouldn&#8217;t it be better if we could just have an object of the git repos and their names, then grab them as needed?</li>
<li>I cannot list installed plugins.</li>
<li>I cannot update a single plugin, in order to update a plugin I have to remove the folder that the plugin is installing into, and run the rake command.</li>
<li>I cannot easily remove a single plugin using the rake command</li>
</ul>


<h3>Lets fix those problems</h3>

<p>Lets start at the top and see what we can do to refactor this code to remove the repetition. The simplest thing I can think of is to create a method called plugins that returns a hash with the plugin name as a key and the git url as its value. So we end up with something like this. (Shortened for times sake)</p>

<figure class='code'><figcaption><span>rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">plugins</span>
</span><span class='line'>  <span class="p">{</span> <span class="s2">&quot;NERDTree&quot;</span>       <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/scrooloose/nerdtree.git&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;NERD-Commenter&quot;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/vim-scripts/The-NERD-Commenter.git&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;L9&quot;</span>            <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/vim-scripts/L9.git&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Ack&quot;</span>          <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/mileszs/ack.vim.git&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Rails&quot;</span>          <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/tpope/vim-rails.git&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Ruby&quot;</span>            <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/vim-ruby/vim-ruby.git&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Syntax Plugins</span>
</span><span class='line'>  <span class="s2">&quot;Markdown&quot;</span>        <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/tpope/vim-markdown.git&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;JSON&quot;</span>            <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/leshill/vim-json.git&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;HAML&quot;</span>            <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/tpope/vim-haml.git&quot;</span><span class="p">,</span>
</span><span class='line'>  
</span><span class='line'>  <span class="c1"># Colors</span>
</span><span class='line'>  <span class="s2">&quot;Solarized&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/altercation/vim-colors-solarized.git&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Squil-Colors&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/squil/vim_colors.git&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="s2">&quot;Molokai&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/tomasr/molokai.git&quot;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>In order to make use of this new hash method we will need to update our default rake task like so.</p>

<figure class='code'><figcaption><span>rake</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">task</span> <span class="ss">:default</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">plugins</span><span class="o">.</span><span class="n">each_pair</span> <span class="p">{</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span> <span class="nb">clone</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>To me this is much more pleasing for a couple reasons, one reason being I am not repeatedly calling having to type clone, can just add the name and url of the plugin to the hash. Secondly and more importantly is the fact that the plugins method is reusable to fix my other issues.</p>

<h3>One down three to go</h3>

<p>So another feature I want in my rakefile is the ability to call <code>rake list</code> and getting a list of installed plugins. This is really easy to do, we are going to create 2 methods, the rake task and then a method to get a list of installed apps. First we will make the method that gets the list for us.</p>

<figure class='code'><figcaption><span>rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">installed_plugins</span>
</span><span class='line'>  <span class="no">Dir</span><span class="o">.</span><span class="n">foreach</span><span class="p">(</span><span class="s2">&quot;bundle&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is a very simple method that just gets a list of of files/directories in the &#8220;bundle&#8221; directory. However when you use <code>Dir.foreach()</code> it also returns 2 unnecessary entries, &#8220;.&#8221; and &#8220;..&#8221;. Luckily they are at the top of the list so we easily get rid of them with <code>.drop(2)</code>. We now have our list so lets put it to use and create our rake task.</p>

<figure class='code'><figcaption><span>rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">task</span> <span class="ss">:list</span> <span class="k">do</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Plugins installed in ~/.vim/bundle&quot;</span>
</span><span class='line'>  <span class="n">installed_plugins</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">plugin</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">plugin</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>We can now use this rake task by running <code>rake list</code> in terminal.</p>

<h3>Halfway there</h3>

<p>We have two problems out of the way and now we are going to tackle updating single plugins. Before we do that we need to consider how we want to handle updating. Do we want to check the git repository and see if there are updates? Or do we want to just delete the directory and re-install the plugin? I personally do not store any configuration in my plugin folders, so I have no issues with taking the easy route and just deleting the directory and re-installing the plugin, however if this is not the case for you, you might want to find a better way to handle this.</p>

<p>Before we try and delete the existing copy of the plugin we want to make sure it exists with this simple method.</p>

<figure class='code'><figcaption><span>rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">plugin_installed?</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">installed_plugins</span><span class="o">.</span><span class="n">include?</span> <span class="nb">name</span>
</span><span class='line'>    <span class="k">return</span> <span class="kp">true</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Plugin not found in bundle direcotry&quot;</span>
</span><span class='line'>    <span class="k">return</span> <span class="kp">false</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>We also want to make sure that plugin is in our list of plugins before we delete the local copy. We can easily do that by checking our hash that we created earlier includes the name of the plugin.</p>

<figure class='code'><figcaption><span>rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">plugin_in_plugins?</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">plugins</span><span class="o">.</span><span class="n">include?</span> <span class="nb">name</span>
</span><span class='line'>    <span class="k">return</span> <span class="kp">true</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Plugin not in hash of plugins&quot;</span>
</span><span class='line'>    <span class="k">return</span> <span class="kp">false</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once we have verified that the plugin exists in our hash and locally in the &#8220;bundle&#8221; directory we can remove it.</p>

<figure class='code'><figcaption><span>rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">delete_plugin</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">plugin_installed?</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;[Removing] </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="no">FileUtils</span><span class="o">.</span><span class="n">rm_rf</span><span class="p">(</span><span class="s2">&quot;bundle/</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;[Removed] </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>We will then use our existing clone method to re-install the plugin. With all our building blocks in place we will now put them together in a update method to handle the logic of verifying that we can in fact update the plugin and then execute the methods to update it.</p>

<figure class='code'><figcaption><span>rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">plugin_installed?</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">plugin_in_plugins?</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>    <span class="n">delete_plugin</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">clone</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">plugins</span><span class="o">.</span><span class="n">values_at</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finally we need to create the rake task to put all this code to use!</p>

<figure class='code'><figcaption><span>rakefile </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">task</span> <span class="ss">:update</span><span class="p">,</span> <span class="o">[</span><span class="ss">:name</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
</span><span class='line'>  <span class="n">update</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This rake task will accept an argument for the name of the plugin and can be used by running <code>rake update[pluginName]</code> in terminal. (If you are using Zsh you will need to add \ in front of the square brackets like <code>rake update\[pluginName\]</code>)</p>

<h3>Last but not least</h3>

<p>The last item on my wish list is to be able to be able to remove a plugin by running <code>rake destroy[pluginName]</code>. Luckily by trying to make our methods as reusable as possible we already developed the &#8220;delete_plugin&#8221; method and just need to add the rake task.</p>

<figure class='code'><figcaption><span>rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">task</span> <span class="ss">:destroy</span><span class="p">,</span> <span class="o">[</span><span class="ss">:name</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
</span><span class='line'>  <span class="n">delete_plugin</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>After running <code>rake destroy[pluginName]</code> of course we will need to open up our rakefile and remove the plugin from our hash.</p>

<h3>Wrap up</h3>

<p>After we have gone through all the steps here is what we end up with.</p>

<figure class='code'><figcaption><span>rakefile</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">task</span> <span class="ss">:default</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">plugins</span><span class="o">.</span><span class="n">each_pair</span> <span class="p">{</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span> <span class="nb">clone</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">task</span> <span class="ss">:list</span> <span class="k">do</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;Plugins installed in ~/.vim/bundle&quot;</span>
</span><span class='line'>  <span class="n">installed_plugins</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">plugin</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">plugin</span> <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">task</span> <span class="ss">:update</span><span class="p">,</span> <span class="o">[</span><span class="ss">:name</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
</span><span class='line'>  <span class="n">update</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">task</span> <span class="ss">:destroy</span><span class="p">,</span> <span class="o">[</span><span class="ss">:name</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
</span><span class='line'>  <span class="n">delete_plugin</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">plugins</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="s2">&quot;NERDTree&quot;</span>        <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/scrooloose/nerdtree.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;NERD-Commenter&quot;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/vim-scripts/The-NERD-Commenter.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;L9&quot;</span>              <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/vim-scripts/L9.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Ack&quot;</span>             <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/mileszs/ack.vim.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Rails&quot;</span>           <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/tpope/vim-rails.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Ruby&quot;</span>            <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/vim-ruby/vim-ruby.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Gist&quot;</span>            <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/mattn/gist-vim.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;TaskPaper&quot;</span>       <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/davidoc/taskpaper.vim.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;VimWiki&quot;</span>         <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/vim-scripts/vimwiki.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Endwise&quot;</span>         <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/tpope/vim-endwise.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;SuperTab&quot;</span>        <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/ervandew/supertab&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Ruby-Doc&quot;</span>        <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/lucapette/vim-ruby-doc.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;BClose&quot;</span>          <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/rbgrouleff/bclose.vim.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;BetterSnipMate&quot;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/bartekd/better-snipmate-snippets.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Surround&quot;</span>        <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/tpope/vim-surround&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Syntax Plugins</span>
</span><span class='line'>    <span class="s2">&quot;Markdown&quot;</span>        <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/tpope/vim-markdown.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;JSON&quot;</span>            <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/leshill/vim-json.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;HAML&quot;</span>            <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/tpope/vim-haml.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;CoffeeScript&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/kchmck/vim-coffee-script.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Javascript&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/pangloss/vim-javascript.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Eruby&quot;</span>           <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/vim-scripts/eruby.vim.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Less&quot;</span>            <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/groenewege/vim-less.git&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># Colors</span>
</span><span class='line'>    <span class="s2">&quot;Solarized&quot;</span>       <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/altercation/vim-colors-solarized.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Squil-Colors&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/squil/vim_colors.git&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s2">&quot;Molokai&quot;</span>         <span class="o">=&gt;</span> <span class="s2">&quot;https://github.com/tomasr/molokai.git&quot;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">clone</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exists?</span><span class="p">(</span><span class="s2">&quot;bundle/</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;[Exists] </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;[Installing] </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="nb">system</span><span class="p">(</span><span class="s2">&quot;git clone </span><span class="si">#{</span><span class="n">url</span><span class="si">}</span><span class="s2"> bundle/</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;[Installed] </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">plugin_installed?</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">plugin_in_plugins?</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>    <span class="n">delete_plugin</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">clone</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">plugins</span><span class="o">.</span><span class="n">values_at</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">installed_plugins</span>
</span><span class='line'>  <span class="no">Dir</span><span class="o">.</span><span class="n">foreach</span><span class="p">(</span><span class="s2">&quot;bundle&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">plugin_installed?</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">installed_plugins</span><span class="o">.</span><span class="n">include?</span> <span class="nb">name</span>
</span><span class='line'>    <span class="k">return</span> <span class="kp">true</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Plugin not found in bundle direcotry&quot;</span>
</span><span class='line'>    <span class="k">return</span> <span class="kp">false</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">plugin_in_plugins?</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">plugins</span><span class="o">.</span><span class="n">include?</span> <span class="nb">name</span>
</span><span class='line'>    <span class="k">return</span> <span class="kp">true</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;Plugin not in hash of plugins&quot;</span>
</span><span class='line'>    <span class="k">return</span> <span class="kp">false</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">delete_plugin</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">plugin_installed?</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;[Removing] </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="no">FileUtils</span><span class="o">.</span><span class="n">rm_rf</span><span class="p">(</span><span class="s2">&quot;bundle/</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">puts</span> <span class="s2">&quot;[Removed] </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>There is a lot you can do with a rake file to help make your Vim setup easier to add and remove to. You don&#8217;t have to limit rake files to your Ruby apps or Vim setups either, there are many problems where a nice rake file is a viable solution.</p>

        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2012-03-04T18:30:00-08:00" pubdate data-updated="true">Mar 4<span>th</span>, 2012</time></div>
        <div class="tags">

<div class="cat">
  
    <a class='category' href='/blog/categories/vim/'>vim</a>
  
</div>

</div>
        
    </div>
</article>


    <article class="post">
    <h1 class="title"><a href="/blog/2012/02/28/new-blog/">New Blog!</a></h1>
    <div class="entry">
        <p>So it has been a while since I gave the whole blog thing a try and I was thinking now would be a good time to start writing blog posts again. So for now I have some configuration to do. Check back soon to see whats new.</p>

        
        
    </div>
    <div class="meta">
        <div class="date">








  


<time datetime="2012-02-28T11:59:00-08:00" pubdate data-updated="true">Feb 28<span>th</span>, 2012</time></div>
        <div class="tags">

<div class="cat">
  
    <a class='category' href='/blog/categories/random/'>Random</a>
  
</div>

</div>
        
    </div>
</article>

<nav id="pagenavi">
    
    
    <a href="/blog/archives" class="center">Blog Archives</a>
</nav></div>
	<footer class="inner">Copyright &copy; 2012 Brady Love</footer>
	<script src="/javascripts/jquery.easing.1.3.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script src="/javascripts/slash.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'bradylovesblog02';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>
</html>